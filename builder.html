<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>SmartCV Builder</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #f4f8fc;
      margin: 0;
      padding: 0;
      color: #333;
    }
    header, footer {
      background-color: #004080;
      color: white;
      text-align: center;
      padding: 1rem;
    }
    main {
      max-width: 960px;
      margin: 2rem auto;
      padding: 1rem;
      background-color: #fff;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.05);
    }
    section {
      margin-bottom: 2rem;
    }
    h2 {
      color: #004080;
      border-bottom: 2px solid #aad8ff;
      padding-bottom: 0.3rem;
      margin-bottom: 1rem;
      text-transform: uppercase;
    }
    input, textarea, select {
      padding: 0.5rem;
      margin-bottom: 0.5rem;
      border: 1px solid #ccc;
      border-radius: 6px;
      font-size: 1rem;
    }
    input[type="text"], input[type="email"], input[type="tel"], textarea, select {
      width: 100%;
    }
    button {
      background-color: #004080;
      color: white;
      padding: 0.6rem 1.2rem;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-weight: bold;
      margin-top: 1rem;
    }
    button:hover {
      background-color: #0060b8;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 1rem;
    }
    table, th, td {
      border: 1px solid #ccc;
    }
    th, td {
      padding: 0.5rem;
      text-align: left;
    }
    ul {
      padding-left: 1.2rem;
      margin-top: 0.5rem;
    }
    .multi-input {
      display: flex;
      gap: 1rem;
      margin-bottom: 0.5rem;
    }
    .multi-input input,
    .multi-input select {
      flex: 1;
    }
  </style>
</head>
<body>
  <header>
    <h1>SmartCV Builder</h1>
    <p>Build your CV quickly and smartly</p>
  </header>

  <main>
    <form id="cvForm">

      <!-- Template -->
      <section>
        <h2>Select Template</h2>
        <select name="template" required>
          <option value="classic">Classic</option>
          <option value="modern">Modern</option>
          <option value="elegant">Elegant</option>
        </select>
      </section>

      <!-- Personal Summary -->
      <section>
        <h2>Personal Summary</h2>
        <textarea name="summary" rows="4" placeholder="Brief summary about yourself"></textarea>
      </section>

      <!-- Personal Info -->
      <section>
        <h2>Personal Information</h2>
        <input type="text" name="fullname" placeholder="Full Name" required />
        <input type="email" name="email" placeholder="Email" />
        <input type="tel" name="phone" placeholder="Phone" />
        <input type="text" name="address" placeholder="Address" />
        <input type="text" name="nationality" placeholder="Nationality" />
        <input type="text" name="dob" placeholder="Date of Birth" />
        <input type="text" name="gender" placeholder="Gender" />
        <input type="text" name="marital_status" placeholder="Marital Status" />
        <input type="text" name="language" placeholder="Other Languages" />
        <input type="numbers" name="NIDA" placeholder="NIDA" />
      </section>

      <!-- Education -->
      <section>
        <h2>Education Background</h2>
        <table id="educationTable">
          <thead>
            <tr>
              <th>Level</th>
              <th>Institution</th>
              <th>Award</th>
              <th>Year (Start - End)</th>
              <th>Grades</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
        <div class="multi-input">
          <input type="text" placeholder="Level" id="eduLevel" />
          <input type="text" placeholder="Institution" id="eduInstitution" />
          <input type="text" placeholder="Award" id="eduAward" />
          <input type="text" placeholder="Start-End (e.g. 2015-2019)" id="eduYears" />
          <input type="text" placeholder="Grades" id="eduGrades" />
        </div>
        <button type="button" onclick="addEducation()">+ Add Education</button>
      </section>

      <!-- Language Skills -->
      <section>
        <h2>Language Skills</h2>
        <table id="languageSkills">
          <thead>
            <tr>
              <th>Language</th>
              <th>Speaking</th>
              <th>Writing</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
        <div class="multi-input">
          <input type="text" id="langName" placeholder="Language" />
          <select id="langSpeak">
            <option value="">Speaking</option>
            <option>Basic</option>
            <option>Intermediate</option>
            <option>Fluent</option>
            <option>Native</option>
          </select>
          <select id="langWrite">
            <option value="">Writing</option>
            <option>Basic</option>
            <option>Intermediate</option>
            <option>Fluent</option>
            <option>Native</option>
          </select>
        </div>
        <button type="button" onclick="addLanguage()">+ Add Language</button>
      </section>

      <!-- Computer Skills -->
      <section>
        <h2>Computer Skills</h2>
        <table id="computerSkills">
          <thead>
            <tr>
              <th>Software</th>
              <th>Proficiency</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
        <div class="multi-input">
          <input type="text" id="compSkillName" placeholder="e.g. MS Office" />
          <select id="compSkillLevel">
            <option value="">Level</option>
            <option>Basic</option>
            <option>Intermediate</option>
            <option>Advanced</option>
          </select>
        </div>
        <button type="button" onclick="addComputerSkill()">+ Add Computer Skill</button>
      </section>

      <!-- Key Competencies -->
      <section>
        <h2>Key Competencies</h2>
        <ul id="competencyList"></ul>
        <input type="text" id="competencyInput" placeholder="Enter competency" />
        <button type="button" onclick="addCompetency()">+ Add Competency</button>
      </section>

      <!-- Interests -->
      <section>
        <h2>Interests and Hobbies</h2>
        <ul id="interestList"></ul>
        <input type="text" id="interestInput" placeholder="Enter interest or hobby" />
        <button type="button" onclick="addInterest()">+ Add Interest</button>
      </section>

      <!-- Referees -->
      <section>
        <h2>Referees</h2>
        <ul id="refereeList"></ul>
        <input type="text" id="refereeInput" placeholder="e.g. John Doe - ABC Ltd - Manager - 0712xxxxxx" />
        <button type="button" onclick="addReferee()">+ Add Referee</button>
      </section>

      <button type="submit">Preview My CV</button>
    </form>
  </main>

  <footer>
    <p>&copy; 2025 SmartCV. All rights reserved.</p>
  </footer>

  <script>
    const form = document.getElementById('cvForm');

    form.addEventListener('submit', function (e) {
      e.preventDefault();
      const formData = new FormData(form);
      const data = Object.fromEntries(formData.entries());

      // Add dynamic entries
      data.education = getTableData("educationTable");
      data.languageSkills = getTableData("languageSkills");
      data.computerSkills = getTableData("computerSkills");
      data.competencies = getList("competencyList");
      data.interests = getList("interestList");
      data.referees = getList("refereeList");

      localStorage.setItem('cvData', JSON.stringify(data));
      window.location.href = 'preview.html';
    });

    function getTableData(id) {
      const rows = document.querySelectorAll(`#${id} tbody tr`);
      return Array.from(rows).map(row => Array.from(row.children).map(cell => cell.textContent.trim()));
    }

    function getList(id) {
      return Array.from(document.querySelectorAll(`#${id} li`)).map(li => li.textContent.trim());
    }

    function addRowToTable(tableId, values) {
      const tr = document.createElement('tr');
      values.forEach(val => {
        const td = document.createElement('td');
        td.textContent = val;
        tr.appendChild(td);
      });
      document.querySelector(`#${tableId} tbody`).appendChild(tr);
    }

    function addEducation() {
      const level = document.getElementById('eduLevel').value;
      const inst = document.getElementById('eduInstitution').value;
      const award = document.getElementById('eduAward').value;
      const years = document.getElementById('eduYears').value;
      const grades = document.getElementById('eduGrades').value;
      if (level && inst && award && years && grades) {
        addRowToTable("educationTable", [level, inst, award, years, grades]);
        ['eduLevel','eduInstitution','eduAward','eduYears','eduGrades'].forEach(id => document.getElementById(id).value = '');
      }
    }

    function addLanguage() {
      const lang = document.getElementById('langName').value;
      const speak = document.getElementById('langSpeak').value;
      const write = document.getElementById('langWrite').value;
      if (lang && speak && write) {
        addRowToTable("languageSkills", [lang, speak, write]);
        ['langName','langSpeak','langWrite'].forEach(id => document.getElementById(id).value = '');
      }
    }

    function addComputerSkill() {
      const skill = document.getElementById('compSkillName').value;
      const level = document.getElementById('compSkillLevel').value;
      if (skill && level) {
        addRowToTable("computerSkills", [skill, level]);
        ['compSkillName','compSkillLevel'].forEach(id => document.getElementById(id).value = '');
      }
    }

    function addCompetency() {
      const val = document.getElementById('competencyInput').value;
      if (val) {
        const li = document.createElement('li');
        li.textContent = val;
        document.getElementById('competencyList').appendChild(li);
        document.getElementById('competencyInput').value = '';
      }
    }

    function addInterest() {
      const val = document.getElementById('interestInput').value;
      if (val) {
        const li = document.createElement('li');
        li.textContent = val;
        document.getElementById('interestList').appendChild(li);
        document.getElementById('interestInput').value = '';
      }
    }

    function addReferee() {
      const val = document.getElementById('refereeInput').value;
      if (val) {
        const li = document.createElement('li');
        li.textContent = val;
        document.getElementById('refereeList').appendChild(li);
        document.getElementById('refereeInput').value = '';
      }
    }
  </script>
</body>
</html>
