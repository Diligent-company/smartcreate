<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SmartCV Builder</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f4f8fc; margin:0; padding:0; }
    header { background: #0077b6; color: #fff; padding: 15px; text-align: center; font-size: 1.4em; }
    main { max-width: 900px; margin: 20px auto; background: #fff; padding: 20px; border-radius: 10px; box-shadow: 0 0 8px rgba(0,0,0,0.1);}
    h2 { color: #0077b6; margin-top: 20px; }
    label { display: block; margin-top: 8px; font-weight: bold; }
    input, textarea, select { width: 100%; padding: 8px; margin-top: 4px; border: 1px solid #ccc; border-radius: 6px; }
    button { background: #0077b6; color: #fff; padding: 10px 20px; border: none; border-radius: 6px; cursor: pointer; margin-top: 15px; }
    button:hover { background: #005f86; }
    .section { border: 1px solid #ddd; border-radius: 10px; padding: 15px; margin-top: 20px; }
    .entry { margin-top: 15px; padding: 10px; border: 1px dashed #ccc; border-radius: 8px; }
  </style>
</head>
<body>
  <header>SmartCV Builder</header>
  <main>
    <form id="cvForm">

      <div class="section">
        <h2>PERSONAL SUMMARY</h2>
        <textarea name="summary" rows="4"></textarea>
      </div>

      <div class="section">
        <h2>PERSONAL INFORMATION</h2>
        <label>Full Name</label><input type="text" name="fullname" required>
        <label>Email</label><input type="email" name="email">
        <label>Phone</label><input type="text" name="phone">
        <label>Address</label><input type="text" name="address">
        <label>Date of Birth</label><input type="date" name="dob">
        <label>Nationality</label><input type="text" name="nationality">
      </div>

      <div class="section" id="educationSection">
        <h2>EDUCATIONAL BACKGROUND</h2>
        <div id="educationList"></div>
        <button type="button" onclick="addEducation()">+ Add Education</button>
      </div>

      <div class="section" id="workSection">
        <h2>WORKING EXPERIENCE</h2>
        <div id="workList"></div>
        <button type="button" onclick="addWork()">+ Add Experience</button>
      </div>

      <div class="section">
        <h2>KEY COMPETENCIES</h2>
        <textarea name="competencies" rows="3"></textarea>
      </div>

      <div class="section" id="skillsSection">
        <h2>SKILLS</h2>
        <h4>Communication Skills</h4>
        <div id="commSkills"></div>
        <button type="button" onclick="addCommSkill()">+ Add Communication Skill</button>
        <h4>Computer Skills</h4>
        <div id="compSkills"></div>
        <button type="button" onclick="addCompSkill()">+ Add Computer Skill</button>
      </div>

      <div class="section">
        <h2>INTERESTS & HOBBIES</h2>
        <textarea name="hobbies" rows="2"></textarea>
      </div>

      <div class="section" id="refereesSection">
        <h2>REFEREES</h2>
        <div id="referees"></div>
        <button type="button" onclick="addReferee()">+ Add Referee</button>
      </div>

      <div style="text-align:center;">
        <button type="submit">Preview CV</button>
      </div>
    </form>
  </main>

  <script>
    function addEducation(){
      let container = document.getElementById("educationList");
      let div = document.createElement("div");
      div.className = "entry";
      div.innerHTML = `
        <label>Level</label><input type="text" name="eduLevel[]">
        <label>Institution</label><input type="text" name="eduSchool[]">
        <label>Award</label><input type="text" name="eduAward[]">
        <label>Years (From - To)</label><input type="text" name="eduYears[]">
        <label>Grade</label><input type="text" name="eduGrade[]">
      `;
      container.appendChild(div);
    }

    function addWork(){
      let container = document.getElementById("workList");
      let div = document.createElement("div");
      div.className = "entry";
      div.innerHTML = `
        <label>Title</label><input type="text" name="jobTitle[]">
        <label>Period</label><input type="text" name="jobTime[]">
        <label>Place</label><input type="text" name="jobPlace[]">
        <label>Institution</label><input type="text" name="jobInstitution[]">
        <label>Department</label><input type="text" name="jobDepartment[]">
        <label>Position</label><input type="text" name="jobPosition[]">
        <label>Office Telephone</label><input type="text" name="jobTel[]">
      `;
      container.appendChild(div);
    }

    function addCommSkill(){
      let container = document.getElementById("commSkills");
      let div = document.createElement("div");
      div.className = "entry";
      div.innerHTML = `<input type="text" name="commSkill[]" placeholder="Communication Skill">`;
      container.appendChild(div);
    }

    function addCompSkill(){
      let container = document.getElementById("compSkills");
      let div = document.createElement("div");
      div.className = "entry";
      div.innerHTML = `<input type="text" name="compSkill[]" placeholder="Computer Skill">`;
      container.appendChild(div);
    }

    function addReferee(){
      let container = document.getElementById("referees");
      let div = document.createElement("div");
      div.className = "entry";
      div.innerHTML = `
        <label>Name</label><input type="text" name="refName[]">
        <label>Organization</label><input type="text" name="refOrg[]">
        <label>Position</label><input type="text" name="refPos[]">
        <label>Address</label><input type="text" name="refAddr[]">
        <label>Contact</label><input type="text" name="refContact[]">
      `;
      container.appendChild(div);
    }

    document.getElementById("cvForm").addEventListener("submit", function(e){
      e.preventDefault();
      let data = new FormData(this);
      let obj = {};
      data.forEach((value, key)=>{
        if(key.endsWith("[]")){
          key = key.replace("[]","");
          if(!obj[key]) obj[key] = [];
          obj[key].push(value);
        } else {
          obj[key] = value;
        }
      });
      localStorage.setItem("cvData", JSON.stringify(obj));
      window.location.href = "preview.html";
    });
  </script>
</body>
</html>
